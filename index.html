<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Umfrage</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { font-family: sans-serif; padding: 20px; background: #f5f5f5; }
    .frage { margin-bottom: 20px; }
    label { display: block; margin-bottom: 5px; font-weight: bold; }
    input[type="text"], textarea {
      width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px;
    }
    button {
      padding: 10px 20px;
      background-color: #4CAF50; color: white;
      border: none; border-radius: 4px;
      cursor: pointer;
    }
    button:hover { background-color: #45a049; }
    #ergebnis { margin-top: 20px; font-weight: bold; }
    #cookie-banner {
      position: fixed; bottom: 0; left: 0; right: 0;
      background-color: #333; color: white;
      padding: 15px; text-align: center;
      display: none;
    }
    #cookie-banner button {
      background-color: #4CAF50; color: white;
      border: none; padding: 10px;
      margin-left: 20px; border-radius: 4px;
    }
  </style>
</head>
<body>

  <h1>Schülerumfrage</h1>

  <form id="umfrageForm">
    <div class="frage">
      <label for="snack">Was snackst du gerne?</label>
      <input type="text" id="snack" name="snack" required>
    </div>

    <div class="frage">
      <label for="konzentration">Wie gut kannst du dich konzentrieren?</label>
      <input type="text" id="konzentration" name="konzentration" required>
    </div>

    <div class="frage">
      <label for="mittagspause">Wie verbringst du deine Mittagspause?</label>
      <input type="text" id="mittagspause" name="mittagspause" required>
    </div>

    <div class="frage">
      <label for="pausenwahl">Was machst du in der Pause?</label>
      <input type="text" id="pausenwahl" name="pausenwahl" required>
    </div>

    <div class="frage">
      <label for="schulweg">Wie kommst du zur Schule?</label>
      <input type="text" id="schulweg" name="schulweg" required>
    </div>

    <div class="frage">
      <label for="sicherheit">Fühlst du dich auf dem Schulweg sicher?</label>
      <input type="text" id="sicherheit" name="sicherheit" required>
    </div>

    <button type="submit">Absenden</button>
  </form>

  <div id="ergebnis"></div>

  <!-- Cookie Banner -->
  <div id="cookie-banner">
    Diese Website verwendet Cookies für Analysezwecke.
    <button onclick="akzeptiereCookies()">Verstanden</button>
  </div>

  <!-- JS zum Absenden + Cookie-Banner -->
  <script>
    // Cookie-Banner anzeigen, wenn noch nicht akzeptiert
    window.onload = function () {
      if (!localStorage.getItem('cookiesAccepted')) {
        document.getElementById('cookie-banner').style.display = 'block';
      }
    }

    function akzeptiereCookies() {
      localStorage.setItem('cookiesAccepted', 'true');
      document.getElementById('cookie-banner').style.display = 'none';
    }

    // Formular absenden
    document.getElementById("umfrageForm").addEventListener("submit", function(e) {
      e.preventDefault();

      const form = e.target;
      const formData = new URLSearchParams();

      formData.append("snack", form.snack.value);
      formData.append("konzentration", form.konzentration.value);
      formData.append("mittagspause", form.mittagspause.value);
      formData.append("pausenwahl", form.pausenwahl.value);
      formData.append("schulweg", form.schulweg.value);
      formData.append("sicherheit", form.sicherheit.value);

      fetch("https://script.google.com/macros/s/DEIN_WEBAPP_LINK/exec", {
        method: "POST",
        headers: {
          "Content-Type": "application/x-www-form-urlencoded"
        },
        body: formData.toString()
      })
      .then(response => response.json())
      .then(data => {
        document.getElementById("ergebnis").innerText = "✅ Erfolgreich gespeichert!";
        form.reset();
      })
      .catch(error => {
        document.getElementById("ergebnis").innerText = "❌ Fehler beim Speichern.";
        console.error(error);
      });
    });
  </script>

<script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:6398855,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
</script>

</body>
</html>
